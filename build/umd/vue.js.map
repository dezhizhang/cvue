{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["let oldArrayProtoMethod = Array.prototype;\n\nexport let arrayMethods = Object.create(oldArrayProtoMethod);\n\nlet methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\n\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    const result = oldArrayProtoMethod[method].apply(this, args);\n    let inserted;\n    let ob = this.__ob__;\n    \n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n        break;\n      default:\n        break;\n    }\n    if(inserted) ob.observeArray(inserted);\n    return result;\n  };\n});\n","import { arrayMethods } from \"./array\";\n\nclass Observer {\n  constructor(value) {\n    Object.defineProperty(value, \"__ob__\", {\n      enumerable: false,\n      configurable: false,\n      value: this,\n    });\n\n    if (Array.isArray(value)) {\n      value.__proto__ = arrayMethods;\n      this.observeArray(value);\n    } else {\n      this.walk(value);\n    }\n  }\n  observeArray(value) {\n    value.forEach((item) => {\n      observe(item);\n    });\n  }\n  walk(data) {\n    let keys = Object.keys(data);\n    keys.forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  observe(value);\n  Object.defineProperty(data, key, {\n    get() {\n      return value;\n    },\n    set(newValue) {\n      if (newValue === value) return;\n      observe(newValue);\n\n      value = newValue;\n    },\n  });\n}\n\nexport function observe(data) {\n  if (typeof data !== \"object\" && data !== null) {\n    return data;\n  }\n  if(data.__ob__) {\n    return data;\n  }\n\n  return new Observer(data);\n}\n","import { observe } from \"./observer/index\";\nimport { proxy } from './utils';\nexport function initState(vm) {\n  const options = vm.$options;\n  if (options.props) {\n    initProps(vm);\n  }\n  if (options.methods) {\n    initMethods(vm);\n  }\n  if (options.data) {\n    initData(vm);\n  }\n  if (options.computed) {\n    initComputed(vm);\n  }\n  if (options.watch) {\n    initWatch();\n  }\n}\n\nfunction initProps() {\n\n}\n\nfunction initMethods() {\n\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data;\n    vm._data = data = typeof data == 'function' ? data.call(vm):data;\n    \n    // for(let key in data) {\n    //   proxy(vm,'_data',key)\n    // }\n    //数据\n    observe(data);\n    \n}\n\nfunction initComputed() {\n\n}\n\nfunction initWatch() {\n\n}\n","import { initState } from \"./state\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (optons) {\n    const vm = this;\n    vm.$options = optons;\n\n    // 初始化状态\n    initState(vm);\n  };\n}\n","import { initMixin } from \"./init\";\n\n\nfunction Vue(optons) {\n   this._init(optons);\n\n}\n\ninitMixin(Vue);\n\nexport default Vue;\n"],"names":["oldArrayProtoMethod","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","Observer","value","defineProperty","enumerable","configurable","isArray","__proto__","walk","item","observe","data","keys","key","defineReactive","get","set","newValue","initState","vm","options","$options","props","initData","computed","watch","_data","call","initMixin","Vue","_init","optons"],"mappings":"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"}